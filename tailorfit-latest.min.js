(function(d){var b={"max-width":0,"max-height":0,"aspect-ratio":0,"x-offset":0,"y-offset":0,"v-position":"center","h-position":"center","rounding-method":"round"};jQuery.fn.tailorfit=function(r,t){return this.each(function(){var x=d(this);var u=x.data("tailorfit")==="active";if(typeof r==="string"&&t!==undefined){x.data(r,t);if(u){s(x)}return x}else{var w=d.extend(b,r);for(var v in w){if(w.hasOwnProperty(v)){x.data(v,w[v])}}}x.data("tailorfit","active");if(u){d(window).off(".tailorfit")}x.css({position:"relative",display:"block"});d(window).on("load.tailorfit resize.tailorfit",function(){s(x)});s(x)});function s(A){var I=A.parent();var L=I.width();var C=I.height();var J=A.data("max-width");var K=A.data("max-height");var G,F,H,B;var z=k(A.data("rounding-method"));if(!(J&&K)){if(!J){G=g(A.data("h-position"),L,A.width());A.css({left:z(G)})}if(!K){F=f(A.data("v-position"),C,A.height());A.css({top:z(F)})}return}var u=n(A.data("aspect-ratio"),L,C);var M=n(J,L,C,L);var D=n(K,L,C,C);if(u===0){B=Math.min(D,C);H=Math.min(M,L)}else{var v=Math.min(M,L);var E=Math.min(D,C);B=Math.min(E,v/u);H=u*B}G=g(A.data("h-position"),L,H);F=f(A.data("v-position"),C,B);G+=n(A.data("x-offset"),L,C,L);F+=n(A.data("y-offset"),L,C,C);A.css({left:z(G),top:z(F),width:z(H),height:z(B)})}};function g(r,t,s){switch(r){case"left":return 0;case"right":return t-s;default:return(t-s)/2}}function f(r,t,s){switch(r){case"top":return 0;case"bottom":return t-s;default:return(t-s)/2}}Array.prototype.peek=function(){return this[this.length-1]};function n(w,s,v,t){if(a(w)){w=w.replace(/\s+/g,"");w=w.replace(/width|w/gi,s);w=w.replace(/height|h/gi,v);var r=w.match(/(\d+)(\.\d+)?\%/g);if(r){d.each(r,function(){var x=j(this,t);w=w.replace(this,x)})}var u=w.match(/\d+\.\d+/g);if(u){d.each(u,function(){var x=Math.round(parseFloat(this));w=w.replace(this,x)})}return h(q(w))}else{return i(w)?j(w,t):e(w)}}function q(t){var v=[];var r=["("];t=t.match(/[\-+*\/()]|\d+/g);t.push(")");var s=0;while(r.length>0){var u=t[s++];if(o(u)){v.push(u)}else{if(u==="("){r.push(u)}else{if(u===")"){while(r.peek()!=="("){v.push(r.pop())}r.pop()}else{while(m(r.peek())){if(l(r.peek(),u)){v.push(r.pop())}else{break}}r.push(u)}}}}return v}function h(s){var r=[];d.each(s,function(){if(o(this)){r.push(parseFloat(this))}else{var u=r.pop();var t=r.pop();r.push(c(t,u,this))}});return r.pop()}function j(r,s){return parseFloat(r.slice(0,-1))/100*(s||1)}function c(r,t,s){r=parseFloat(r);t=parseFloat(t);switch(s[0]){case"+":return r+t;case"-":return r-t;case"*":return r*t;case"/":return r/t;default:window.console.error("Invalid operator:",s[0]);return NaN}}function k(r){switch(r){case"floor":return Math.floor;case"ceiling":return Math.ceil;default:return Math.round}}function p(r){return r==="*"||r==="/"?1:0}function l(s,r){return p(s)>=p(r)}function e(r,s){return isNaN(r=parseFloat(r))?s||0:r}function o(r){return(/\d+(\.\d+)?/).test(r)}function m(r){return(/[\-\+\*\/]/).test(r)}function a(r){return(/[\-\+\*\/]/).test(r)}function i(r){return(/(\d+)(\.\d+)?\%/).test(r)}})(jQuery);